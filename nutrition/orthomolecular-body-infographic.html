<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>äººä½“å›³Ã—æ „é¤Šç´ ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ï¼ˆã‚ªãƒ¼ã‚½ãƒ¢ãƒ¬ã‚­ãƒ¥ãƒ©ãƒ¼ï¼‰</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap">
  <style>

    :root {
      --bg-deep: #020617;
      --bg-1: #0f172a;
      --bg-2: #1e293b;
      --panel: rgba(255,255,255,0.07);
      --text: #e2e8f0;
      --accent: #22d3ee;
      --accent2: #a78bfa;
      --good: #34d399;
      --c-brain: #a855f7;
      --c-shoulder: #06b6d4;
      --c-heart: #f43f5e;
      --c-gut: #f97316;
      --c-muscle: #22c55e;
      --c-bone: #eab308;
    }

    *, *::before, *::after { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;
      color: var(--text);
      background: var(--bg-deep);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* â”€â”€ Starfield canvas â”€â”€ */
    #starfield {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }

    /* â”€â”€ Nav header â”€â”€ */
    .nav {
      position: relative;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 24px;
      background: rgba(15,23,42,0.85);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .nav-title {
      font-size: clamp(15px,2.2vw,20px);
      font-weight: 900;
      background: linear-gradient(90deg,#22d3ee,#a855f7,#f43f5e);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 0.03em;
    }
    .btn-all {
      font-family: inherit;
      font-size: 13px;
      font-weight: 700;
      padding: 8px 18px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg,#7c3aed,#0891b2);
      color: #fff;
      transition: transform 0.18s, box-shadow 0.18s;
      box-shadow: 0 0 16px rgba(124,58,237,0.45);
    }
    .btn-all:hover { transform: scale(1.06); box-shadow: 0 0 28px rgba(124,58,237,0.7); }
    .btn-all:focus-visible { outline: 3px solid #a855f7; outline-offset: 3px; }

    /* â”€â”€ Main layout â”€â”€ */
    .main-wrap {
      position: relative;
      z-index: 2;
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 18px 48px;
    }

    /* â”€â”€ Hero title â”€â”€ */
    .hero {
      text-align: center;
      padding: 36px 12px 28px;
    }
    .hero h1 {
      margin: 0 0 10px;
      font-size: clamp(26px,4.5vw,52px);
      font-weight: 900;
      line-height: 1.18;
      background: linear-gradient(135deg,#38bdf8 0%,#a855f7 50%,#f43f5e 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 0.02em;
      position: relative;
    }
    .sparkle {
      display: inline-block;
      animation: sparkle-spin 2.4s linear infinite;
    }
    @keyframes sparkle-spin {
      0%   { transform: rotate(0deg) scale(1);   }
      50%  { transform: rotate(180deg) scale(1.3); }
      100% { transform: rotate(360deg) scale(1);  }
    }
    .hero-sub {
      color: #94a3b8;
      font-size: clamp(13px,1.8vw,16px);
      line-height: 1.75;
      max-width: 620px;
      margin: 0 auto;
    }

    /* â”€â”€ Two-column stage â”€â”€ */
    .stage {
      display: grid;
      grid-template-columns: minmax(0, 420px) 1fr;
      gap: 28px;
      align-items: start;
    }
    @media (max-width: 820px) {
      .stage { grid-template-columns: 1fr; }
    }

    /* â”€â”€ Body figure column â”€â”€ */
    .body-col {
      position: relative;
      background: linear-gradient(160deg, rgba(30,41,59,0.75) 0%, rgba(15,23,42,0.6) 100%);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 22px;
      padding: 22px 18px 18px;
      backdrop-filter: blur(8px);
      box-shadow: 0 24px 80px rgba(0,0,0,0.4);
    }
    .body-svg-wrap {
      width: min(340px, 100%);
      margin: 0 auto;
      position: relative;
    }
    .body-svg-wrap svg {
      width: 100%;
      height: auto;
    }
    .hint-text {
      text-align: center;
      color: #64748b;
      font-size: 12px;
      margin-top: 12px;
    }
    .hint-text span {
      animation: hint-pulse 2s ease-in-out infinite;
    }
    @keyframes hint-pulse {
      0%,100% { opacity: 0.6; }
      50%      { opacity: 1; }
    }

    /* SVG body outline */
    .body-outline { fill: #0c1628; stroke: #1e3a5f; stroke-width: 2.5; }

    /* Zone base + per-zone glow */
    .zone {
      cursor: pointer;
      stroke-width: 2.5;
      transition: filter 0.25s, transform 0.25s;
      transform-box: fill-box;
      transform-origin: center;
    }
    .zone:focus { outline: none; }
    .zone:focus-visible {
      stroke: #fff;
      stroke-width: 4;
    }

    .zone[data-zone="brain"]    { fill: rgba(168,85,247,0.28);  stroke: #a855f7; filter: drop-shadow(0 0 8px #a855f7); }
    .zone[data-zone="shoulder"] { fill: rgba(6,182,212,0.28);   stroke: #06b6d4; filter: drop-shadow(0 0 8px #06b6d4); }
    .zone[data-zone="heart"]    { fill: rgba(244,63,94,0.28);   stroke: #f43f5e; filter: drop-shadow(0 0 8px #f43f5e); }
    .zone[data-zone="gut"]      { fill: rgba(249,115,22,0.28);  stroke: #f97316; filter: drop-shadow(0 0 8px #f97316); }
    .zone[data-zone="muscle"]   { fill: rgba(34,197,94,0.28);   stroke: #22c55e; filter: drop-shadow(0 0 8px #22c55e); }
    .zone[data-zone="bone"]     { fill: rgba(234,179,8,0.28);   stroke: #eab308; filter: drop-shadow(0 0 8px #eab308); }

    /* pulse animations per zone */
    .zone[data-zone="brain"]    { animation: pulse-brain    2.8s ease-in-out infinite; }
    .zone[data-zone="shoulder"] { animation: pulse-shoulder 3.1s ease-in-out infinite; }
    .zone[data-zone="heart"]    { animation: pulse-heart    1.8s ease-in-out infinite; }
    .zone[data-zone="gut"]      { animation: pulse-gut      3.4s ease-in-out infinite; }
    .zone[data-zone="muscle"]   { animation: pulse-muscle   2.5s ease-in-out infinite; }
    .zone[data-zone="bone"]     { animation: pulse-bone     3.8s ease-in-out infinite; }

    @keyframes pulse-brain    { 0%,100%{filter:drop-shadow(0 0 6px #a855f7);transform:scale(1)}   50%{filter:drop-shadow(0 0 18px #a855f7);transform:scale(1.04)} }
    @keyframes pulse-shoulder { 0%,100%{filter:drop-shadow(0 0 6px #06b6d4);transform:scale(1)}   50%{filter:drop-shadow(0 0 18px #06b6d4);transform:scale(1.04)} }
    @keyframes pulse-heart    { 0%,100%{filter:drop-shadow(0 0 6px #f43f5e);transform:scale(1)}   50%{filter:drop-shadow(0 0 22px #f43f5e);transform:scale(1.07)} }
    @keyframes pulse-gut      { 0%,100%{filter:drop-shadow(0 0 6px #f97316);transform:scale(1)}   50%{filter:drop-shadow(0 0 18px #f97316);transform:scale(1.04)} }
    @keyframes pulse-muscle   { 0%,100%{filter:drop-shadow(0 0 6px #22c55e);transform:scale(1)}   50%{filter:drop-shadow(0 0 18px #22c55e);transform:scale(1.04)} }
    @keyframes pulse-bone     { 0%,100%{filter:drop-shadow(0 0 6px #eab308);transform:scale(1)}   50%{filter:drop-shadow(0 0 18px #eab308);transform:scale(1.04)} }

    .zone:hover, .zone.active {
      animation: none !important;
      transform: scale(1.1);
      cursor: pointer;
    }
    .zone[data-zone="brain"].active,    .zone[data-zone="brain"]:hover    { fill: rgba(168,85,247,0.55);  filter: drop-shadow(0 0 28px #a855f7); }
    .zone[data-zone="shoulder"].active, .zone[data-zone="shoulder"]:hover { fill: rgba(6,182,212,0.55);   filter: drop-shadow(0 0 28px #06b6d4); }
    .zone[data-zone="heart"].active,    .zone[data-zone="heart"]:hover    { fill: rgba(244,63,94,0.55);   filter: drop-shadow(0 0 28px #f43f5e); }
    .zone[data-zone="gut"].active,      .zone[data-zone="gut"]:hover      { fill: rgba(249,115,22,0.55);  filter: drop-shadow(0 0 28px #f97316); }
    .zone[data-zone="muscle"].active,   .zone[data-zone="muscle"]:hover   { fill: rgba(34,197,94,0.55);   filter: drop-shadow(0 0 28px #22c55e); }
    .zone[data-zone="bone"].active,     .zone[data-zone="bone"]:hover     { fill: rgba(234,179,8,0.55);   filter: drop-shadow(0 0 28px #eab308); }

    .zone-label {
      fill: #f1f5f9;
      font-size: 13px;
      font-weight: 700;
      text-anchor: middle;
      pointer-events: none;
    }

    /* â”€â”€ Info panel column â”€â”€ */
    .info-col {
      position: relative;
      min-height: 420px;
    }

    .panel-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 14px;
      height: 100%;
      min-height: 380px;
      background: rgba(255,255,255,0.04);
      border: 1px dashed rgba(255,255,255,0.12);
      border-radius: 22px;
      color: #475569;
      font-size: 15px;
      text-align: center;
      padding: 32px;
      transition: opacity 0.3s;
    }
    .panel-placeholder .ph-icon { font-size: 52px; }
    .panel-placeholder.hidden { display: none; }

    .info-panel {
      display: none;
      flex-direction: column;
      gap: 18px;
      background: linear-gradient(160deg, rgba(30,41,59,0.88) 0%, rgba(15,23,42,0.75) 100%);
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 22px;
      padding: 26px 24px 28px;
      backdrop-filter: blur(10px);
      box-shadow: 0 24px 80px rgba(0,0,0,0.38);
      opacity: 0;
      transform: translateX(30px);
      transition: opacity 0.35s ease, transform 0.35s ease;
    }
    .info-panel.visible {
      display: flex;
      opacity: 0;
      transform: translateX(30px);
    }
    .info-panel.shown {
      opacity: 1;
      transform: translateX(0);
    }

    .panel-header {
      display: flex;
      align-items: center;
      gap: 14px;
    }
    .panel-icon {
      font-size: 42px;
      line-height: 1;
      filter: drop-shadow(0 0 10px currentColor);
    }
    .panel-zone-name {
      font-size: clamp(20px,2.8vw,28px);
      font-weight: 900;
      line-height: 1.1;
    }
    .panel-desc {
      margin-top: 4px;
      font-size: 13px;
      color: #94a3b8;
      line-height: 1.65;
    }

    .section-label {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.1em;
      color: #64748b;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    /* Nutrient chips */
    .chip-list {
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
    }
    .chip {
      font-size: 12px;
      font-weight: 700;
      padding: 5px 11px;
      border-radius: 999px;
      color: #fff;
      white-space: nowrap;
    }

    /* Top 3 ranking */
    .ranking-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .rank-item {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 9px 14px;
      border: 1px solid rgba(255,255,255,0.08);
    }
    .rank-medal { font-size: 20px; line-height: 1; flex-shrink: 0; }
    .rank-nutrient { font-weight: 700; font-size: 14px; flex: 1; }
    .rank-food-tags { display: flex; flex-wrap: wrap; gap: 5px; }
    .food-tag {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(255,255,255,0.1);
      color: #cbd5e1;
      border: 1px solid rgba(255,255,255,0.12);
    }

    /* Deficiency signs */
    .sign-list {
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
    }
    .sign-badge {
      font-size: 11px;
      font-weight: 700;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(239,68,68,0.18);
      color: #fca5a5;
      border: 1px solid rgba(239,68,68,0.35);
    }

    /* "All zones" highlight overlay panel */
    .all-panel {
      display: none;
      margin-top: 22px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 18px;
      padding: 20px 20px 24px;
    }
    .all-panel.open { display: block; }
    .all-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 12px;
      margin-top: 14px;
    }
    .all-card {
      border-radius: 14px;
      padding: 12px 14px;
      border: 1px solid rgba(255,255,255,0.1);
      background: rgba(255,255,255,0.04);
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .all-card:hover { transform: translateY(-3px); }
    .all-card-title { font-size: 14px; font-weight: 700; margin-bottom: 6px; }
    .all-card-chips { display: flex; flex-wrap: wrap; gap: 4px; }
    .all-chip { font-size: 10px; padding: 2px 7px; border-radius: 999px; color: #fff; opacity: 0.88; }

    /* Particle burst */
    .particle {
      position: fixed;
      pointer-events: none;
      z-index: 999;
      line-height: 1;
    }

    /* Footer */
    footer {
      position: relative;
      z-index: 2;
      text-align: center;
      padding: 20px 18px 28px;
      font-size: 12px;
      color: #475569;
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #0f172a; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
  </style>
</head>
<body>

<canvas id="starfield"></canvas>

<!-- Navigation -->
<nav class="nav" role="navigation" aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
  <span class="nav-title">ğŸ”¬ ã‚ªãƒ¼ã‚½ãƒ¢ãƒ¬ã‚­ãƒ¥ãƒ©ãƒ¼ äººä½“æ „é¤Šãƒãƒƒãƒ—</span>
  <button class="btn-all" id="btnAll" aria-expanded="false" aria-controls="allPanel">âœ¨ å…¨éƒ¨ä½ã‚’è¦‹ã‚‹</button>
</nav>

<!-- Main -->
<main class="main-wrap" role="main">
  <!-- Hero -->
  <div class="hero">
    <h1><span class="sparkle">âœ¨</span> äººä½“å›³ã¨æ „é¤Šç´ ã®é–¢ä¿‚ <span class="sparkle">âœ¨</span></h1>
    <p class="hero-sub">åˆ†å­æ•´åˆæ „é¤ŠåŒ»å­¦ï¼ˆã‚ªãƒ¼ã‚½ãƒ¢ãƒ¬ã‚­ãƒ¥ãƒ©ãƒ¼ï¼‰ã®è¦³ç‚¹ã‹ã‚‰ã€<br>å„éƒ¨ä½ã«å¿…è¦ãªãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«ã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«å­¦ã¹ã¾ã™ã€‚</p>
  </div>

  <!-- Two-column stage -->
  <div class="stage">
    <!-- Left: body figure -->
    <div class="body-col" id="bodyCol">
      <div class="body-svg-wrap">
        <svg viewBox="0 0 320 660" aria-label="äººä½“ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å›³ã€‚å„éƒ¨ä½ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ „é¤Šæƒ…å ±ã‚’è¡¨ç¤º" role="img">
          <!-- Body outline -->
          <!-- Head -->
          <ellipse class="body-outline" cx="160" cy="72" rx="52" ry="58"/>
          <!-- Neck -->
          <rect class="body-outline" x="146" y="124" width="28" height="22" rx="6"/>
          <!-- Torso -->
          <path class="body-outline" d="M104,146 C88,148 72,158 68,178 L58,290 C56,306 60,318 72,322 L122,330 L198,330 L248,322 C260,318 264,306 262,290 L252,178 C248,158 232,148 216,146 Z"/>
          <!-- Left arm -->
          <path class="body-outline" d="M104,150 C90,152 72,162 64,178 L50,280 C46,296 54,312 68,316 L80,318 L88,200 Z"/>
          <!-- Right arm -->
          <path class="body-outline" d="M216,150 C230,152 248,162 256,178 L270,280 C274,296 266,312 252,316 L240,318 L232,200 Z"/>
          <!-- Left leg -->
          <path class="body-outline" d="M122,330 L110,460 C108,476 112,498 118,520 L128,580 C130,592 138,600 148,600 L158,600 L162,460 L162,332 Z"/>
          <!-- Right leg -->
          <path class="body-outline" d="M198,330 L210,460 C212,476 208,498 202,520 L192,580 C190,592 182,600 172,600 L162,600 L162,460 L162,332 Z"/>

          <!-- Face features -->
          <!-- Left eye -->
          <ellipse cx="144" cy="64" rx="6" ry="5" fill="#1e3a5f" stroke="#2d5a8e" stroke-width="1.5"/>
          <circle cx="144" cy="64" r="2.5" fill="#7dd3fc" opacity="0.7"/>
          <!-- Right eye -->
          <ellipse cx="176" cy="64" rx="6" ry="5" fill="#1e3a5f" stroke="#2d5a8e" stroke-width="1.5"/>
          <circle cx="176" cy="64" r="2.5" fill="#7dd3fc" opacity="0.7"/>
          <!-- Eyebrows -->
          <path d="M138,56 Q144,53 150,56" stroke="#475569" stroke-width="2" fill="none" stroke-linecap="round"/>
          <path d="M170,56 Q176,53 182,56" stroke="#475569" stroke-width="2" fill="none" stroke-linecap="round"/>
          <!-- Mouth -->
          <path d="M150,86 Q160,92 170,86" stroke="#475569" stroke-width="2" fill="none" stroke-linecap="round"/>

          <!-- Clickable zones -->
          <ellipse class="zone" data-zone="brain"
            cx="160" cy="68" rx="46" ry="52"
            tabindex="0" role="button"
            aria-label="é ­ãƒ»è„³ - ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ „é¤Šæƒ…å ±ã‚’è¦‹ã‚‹"/>

          <ellipse class="zone" data-zone="shoulder"
            cx="160" cy="162" rx="92" ry="22"
            tabindex="0" role="button"
            aria-label="è‚©ãƒ»é¦– - ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ „é¤Šæƒ…å ±ã‚’è¦‹ã‚‹"/>

          <ellipse class="zone" data-zone="heart"
            cx="152" cy="218" rx="42" ry="38"
            tabindex="0" role="button"
            aria-label="å¿ƒè‡“ - ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ „é¤Šæƒ…å ±ã‚’è¦‹ã‚‹"/>

          <ellipse class="zone" data-zone="gut"
            cx="160" cy="282" rx="50" ry="34"
            tabindex="0" role="button"
            aria-label="è…¸ - ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ „é¤Šæƒ…å ±ã‚’è¦‹ã‚‹"/>

          <ellipse class="zone" data-zone="muscle"
            cx="160" cy="390" rx="60" ry="34"
            tabindex="0" role="button"
            aria-label="ç­‹è‚‰ - ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ „é¤Šæƒ…å ±ã‚’è¦‹ã‚‹"/>

          <ellipse class="zone" data-zone="bone"
            cx="160" cy="530" rx="56" ry="32"
            tabindex="0" role="button"
            aria-label="éª¨ - ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ „é¤Šæƒ…å ±ã‚’è¦‹ã‚‹"/>

          <!-- Zone labels -->
          <text class="zone-label" x="160" y="72">ğŸ§  é ­</text>
          <text class="zone-label" x="160" y="166">ğŸ’† è‚©ãƒ»é¦–</text>
          <text class="zone-label" x="152" y="222">â¤ï¸ å¿ƒè‡“</text>
          <text class="zone-label" x="160" y="286">ğŸŒ¿ è…¸</text>
          <text class="zone-label" x="160" y="394">ğŸ’ª ç­‹è‚‰</text>
          <text class="zone-label" x="160" y="534">ğŸ¦´ éª¨</text>
        </svg>
      </div>
      <p class="hint-text"><span>ğŸ‘† éƒ¨ä½ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ „é¤Šæƒ…å ±ã‚’ç¢ºèª</span></p>
    </div>

    <!-- Right: info panel -->
    <div class="info-col" id="infoCol">
      <div class="panel-placeholder" id="placeholder">
        <span class="ph-icon">ğŸ”¬</span>
        <div>éƒ¨ä½ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨<br>è©³ç´°ãªæ „é¤Šæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>
      </div>
      <div class="info-panel" id="infoPanel" aria-live="polite"></div>
    </div>
  </div>

  <!-- All-zones overview panel -->
  <div class="all-panel" id="allPanel" aria-label="å…¨éƒ¨ä½ã®æ „é¤Šæƒ…å ±ä¸€è¦§">
    <div class="section-label">å…¨éƒ¨ä½ã®æ „é¤Šã‚µãƒãƒªãƒ¼</div>
    <div class="all-grid" id="allGrid"></div>
  </div>
</main>

<footer>
  <p>âš ï¸ ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯å­¦ç¿’ãƒ»æƒ…å ±æä¾›ã‚’ç›®çš„ã¨ã—ãŸã‚‚ã®ã§ã™ã€‚åŒ»ç™‚è¨ºæ–­ãƒ»æ²»ç™‚ã®ä»£æ›¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>å¥åº·ä¸Šã®å•é¡Œã¯å¿…ãšåŒ»ç™‚å°‚é–€å®¶ã«ã”ç›¸è«‡ãã ã•ã„ã€‚</p>
</footer>

<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Zone data
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const zones = {
  brain: {
    icon: "ğŸ§ ",
    name: "é ­ï¼ˆè„³ãƒ»ç¥çµŒï¼‰",
    color: "#a855f7",
    desc: "ã‚ªãƒ¼ã‚½ãƒ¢ãƒ¬ã‚­ãƒ¥ãƒ©ãƒ¼ã§ã¯ã€ç¥çµŒä¼é”ãƒ»é›†ä¸­åŠ›ãƒ»æ°—åˆ†å®‰å®šã®ãŸã‚ã«Bç¾¤ã€é‰„ã€äºœé‰›ã€ãƒã‚°ãƒã‚·ã‚¦ãƒ ã€ã‚ªãƒ¡ã‚¬3ã‚’é‡è¦–ã—ã¾ã™ã€‚B6/B12/è‘‰é…¸ã¯ãƒ¡ãƒãƒ«åŒ–å›è·¯ã«ä¸å¯æ¬ ã§ã€é‰„ã¯é…¸ç´ ä¾›çµ¦ã€äºœé‰›ã¯ç¥çµŒä¼é”ç‰©è³ªã®åˆæˆã‚’æ”¯ãˆã¾ã™ã€‚CoQ10ã¯ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢æ©Ÿèƒ½ã‚’é«˜ã‚ã€è„³ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å®‰å®šã«è²¢çŒ®ã—ã¾ã™ã€‚",
    nutrients: [
      { label: "ğŸ’Š B1", color: "#7c3aed" },
      { label: "ğŸ’Š B6", color: "#6d28d9" },
      { label: "ğŸ’Š B12", color: "#5b21b6" },
      { label: "ğŸŒ± è‘‰é…¸", color: "#7c3aed" },
      { label: "ğŸ”´ é‰„", color: "#b45309" },
      { label: "âš¡ äºœé‰›", color: "#0e7490" },
      { label: "âœ¨ Mg", color: "#475569" },
      { label: "ğŸŸ ã‚ªãƒ¡ã‚¬3", color: "#1d4ed8" },
      { label: "âš¡ CoQ10", color: "#7c2d12" }
    ],
    top3: [
      { medal: "ğŸ¥‡", name: "B12", foods: ["ãƒ¬ãƒãƒ¼", "åµ", "é­š"] },
      { medal: "ğŸ¥ˆ", name: "ã‚ªãƒ¡ã‚¬3", foods: ["ã‚µãƒ¼ãƒ¢ãƒ³", "ã‚¯ãƒ«ãƒŸ"] },
      { medal: "ğŸ¥‰", name: "äºœé‰›", foods: ["ç‰¡è £", "ã‹ã¼ã¡ã‚ƒã®ç¨®"] }
    ],
    signs: ["é›†ä¸­åŠ›ä½ä¸‹", "æ°—åˆ†ã®è½ã¡è¾¼ã¿", "è¨˜æ†¶åŠ›ä½ä¸‹"]
  },
  shoulder: {
    icon: "ğŸ’†",
    name: "è‚©ãƒ»é¦–ï¼ˆç·Šå¼µãƒ»ã‚³ãƒªï¼‰",
    color: "#06b6d4",
    desc: "ç­‹ç·Šå¼µã¨è¡€æµã®è¦³ç‚¹ã‹ã‚‰ãƒã‚°ãƒã‚·ã‚¦ãƒ ã€ã‚«ãƒ«ã‚·ã‚¦ãƒ ã€ãƒ“ã‚¿ãƒŸãƒ³Dã€ãƒ“ã‚¿ãƒŸãƒ³EãŒé‡è¦ã§ã™ã€‚Mgã¯ç­‹å¼›ç·©ä½œç”¨ã€Kã¯é›»è§£è³ªãƒãƒ©ãƒ³ã‚¹ã€Eã¯PGE1ç”£ç”Ÿã‚’é€šã˜ãŸæœ«æ¢¢å¾ªç’°ã‚µãƒãƒ¼ãƒˆã«é–¢ä¸ã—ã¾ã™ã€‚ãƒ“ã‚¿ãƒŸãƒ³Dã¯ç­‹åŠ›ã¨ç¥çµŒæ©Ÿèƒ½ã®ä¸¡æ–¹ã‚’æ”¯ãˆã¾ã™ã€‚",
    nutrients: [
      { label: "âœ¨ Mg", color: "#0e7490" },
      { label: "ğŸ¦· Ca", color: "#0369a1" },
      { label: "â˜€ï¸ ãƒ“ã‚¿ãƒŸãƒ³D", color: "#0284c7" },
      { label: "ğŸ›¡ ãƒ“ã‚¿ãƒŸãƒ³E", color: "#0891b2" },
      { label: "âš¡ K", color: "#0e7490" }
    ],
    top3: [
      { medal: "ğŸ¥‡", name: "Mg", foods: ["ãƒŠãƒƒãƒ„", "è±†è…"] },
      { medal: "ğŸ¥ˆ", name: "ãƒ“ã‚¿ãƒŸãƒ³D", foods: ["é®­", "ãã®ã“"] },
      { medal: "ğŸ¥‰", name: "Ca", foods: ["å°é­š", "ä¹³è£½å“"] }
    ],
    signs: ["è‚©ã“ã‚Š", "ç­‹ã‘ã„ã‚Œã‚“", "ç–²åŠ´æ„Ÿ"]
  },
  heart: {
    icon: "â¤ï¸",
    name: "å¿ƒè‡“ï¼ˆå¾ªç’°ï¼‰",
    color: "#f43f5e",
    desc: "å¾ªç’°ãƒ»å¿ƒè‡“ã‚¨ãƒãƒ«ã‚®ãƒ¼ä»£è¬ã®è¦³ç‚¹ã§ã€CoQ10ã€ãƒ“ã‚¿ãƒŸãƒ³B1ã€ãƒã‚°ãƒã‚·ã‚¦ãƒ ã€ã‚»ãƒ¬ãƒ³ã€ã‚«ãƒªã‚¦ãƒ ã€ã‚ªãƒ¡ã‚¬3ãŒé‡è¦è¦–ã•ã‚Œã¾ã™ã€‚CoQ10ã¯å¿ƒç­‹ã®ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢ã‚¨ãƒãƒ«ã‚®ãƒ¼ç”£ç”Ÿã®è¦ã§ã€B1ä¸è¶³ã¯å¿ƒæ©Ÿèƒ½ä½ä¸‹ã¨ç›´çµã—ã¾ã™ã€‚Kã¯å¿ƒæ‹ãƒªã‚ºãƒ ã®å®‰å®šã«æ¬ ã‹ã›ã¾ã›ã‚“ã€‚",
    nutrients: [
      { label: "âš¡ CoQ10", color: "#be123c" },
      { label: "ğŸ’Š B1", color: "#9f1239" },
      { label: "âœ¨ Mg", color: "#881337" },
      { label: "ğŸ›¡ ã‚»ãƒ¬ãƒ³", color: "#be123c" },
      { label: "âš¡ K", color: "#9f1239" },
      { label: "ğŸŸ ã‚ªãƒ¡ã‚¬3", color: "#7f1d1d" }
    ],
    top3: [
      { medal: "ğŸ¥‡", name: "CoQ10", foods: ["ç‰›ãƒãƒ„", "ã‚¤ãƒ¯ã‚·"] },
      { medal: "ğŸ¥ˆ", name: "Mg", foods: ["ã»ã†ã‚Œã‚“è‰", "ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰"] },
      { medal: "ğŸ¥‰", name: "K", foods: ["ãƒãƒŠãƒŠ", "ã•ã¤ã¾ã„ã‚‚"] }
    ],
    signs: ["å‹•æ‚¸", "æ¯åˆ‡ã‚Œ", "ç–²ã‚Œã‚„ã™ã•"]
  },
  gut: {
    icon: "ğŸŒ¿",
    name: "è…¸ï¼ˆæ¶ˆåŒ–ãƒ»å¸åï¼‰",
    color: "#f97316",
    desc: "è…¸ç²˜è†œã®ç¶­æŒã«ã¯ãƒ“ã‚¿ãƒŸãƒ³Aã€ãƒ“ã‚¿ãƒŸãƒ³Dã€äºœé‰›ãŒå®šç•ªã€‚èƒƒé…¸ãƒ»æ¶ˆåŒ–é…µç´ ã®åƒãã«ã¯å¡©åŒ–ç‰©ã€ãƒã‚°ãƒã‚·ã‚¦ãƒ ã€ãƒãƒ³ã‚¬ãƒ³ã‚‚é–¢ä¸ã—ã¾ã™ã€‚ã‚ªãƒ¼ã‚½ãƒ¢ãƒ¬ã‚­ãƒ¥ãƒ©ãƒ¼ã§ã¯ã€Œå¸åã§ãã‚‹ä½“ã€ã¥ãã‚Šã‚’æœ€å„ªå…ˆã¨ã—ã€ã‚°ãƒ«ã‚¿ãƒŸãƒ³ã§è…¸ç²˜è†œã‚’ç›´æ¥ä¿®å¾©ã—ã¾ã™ã€‚",
    nutrients: [
      { label: "ğŸ¥• ãƒ“ã‚¿ãƒŸãƒ³A", color: "#c2410c" },
      { label: "â˜€ï¸ ãƒ“ã‚¿ãƒŸãƒ³D", color: "#ea580c" },
      { label: "âš¡ äºœé‰›", color: "#c2410c" },
      { label: "ğŸ§‚ å¡©åŒ–ç‰©", color: "#9a3412" },
      { label: "âœ¨ Mg", color: "#7c2d12" },
      { label: "ğŸ”¬ Mn", color: "#c2410c" },
      { label: "ğŸŒ¾ ã‚°ãƒ«ã‚¿ãƒŸãƒ³", color: "#ea580c" }
    ],
    top3: [
      { medal: "ğŸ¥‡", name: "ãƒ“ã‚¿ãƒŸãƒ³A", foods: ["ã«ã‚“ã˜ã‚“", "ãƒ¬ãƒãƒ¼"] },
      { medal: "ğŸ¥ˆ", name: "äºœé‰›", foods: ["ç‰¡è £", "è±†é¡"] },
      { medal: "ğŸ¥‰", name: "ã‚°ãƒ«ã‚¿ãƒŸãƒ³", foods: ["é¶èƒ¸è‚‰", "åµ"] }
    ],
    signs: ["ãŠè…¹ã®å¼µã‚Š", "æ¶ˆåŒ–ä¸è‰¯", "å…ç–«ä½ä¸‹"]
  },
  muscle: {
    icon: "ğŸ’ª",
    name: "ç­‹è‚‰ï¼ˆä»£è¬ãƒ»å›å¾©ï¼‰",
    color: "#22c55e",
    desc: "ç­‹åç¸®ã¨å›å¾©ã«ã¯ãƒã‚°ãƒã‚·ã‚¦ãƒ ã€ã‚«ãƒ«ã‚·ã‚¦ãƒ ã€ã‚«ãƒªã‚¦ãƒ ã€é‰„ã€ãƒ“ã‚¿ãƒŸãƒ³Cã€ãƒ“ã‚¿ãƒŸãƒ³Bç¾¤ã€ãƒ“ã‚¿ãƒŸãƒ³Dã‚’ãƒã‚§ãƒƒã‚¯ã€‚ãƒ“ã‚¿ãƒŸãƒ³Cã¯ã‚³ãƒ©ãƒ¼ã‚²ãƒ³ç”Ÿæˆã¨æŠ—é…¸åŒ–ã€é‰„ã¯é…¸ç´ é‹æ¬ã€Bç¾¤ã¯ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢ã§ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ä»£è¬ã‚’æ”¯ãˆã¾ã™ã€‚",
    nutrients: [
      { label: "âœ¨ Mg", color: "#15803d" },
      { label: "ğŸ¦· Ca", color: "#166534" },
      { label: "âš¡ K", color: "#14532d" },
      { label: "ğŸ”´ é‰„", color: "#365314" },
      { label: "ğŸŠ ãƒ“ã‚¿ãƒŸãƒ³C", color: "#4d7c0f" },
      { label: "ğŸ’Š Bç¾¤", color: "#15803d" },
      { label: "â˜€ï¸ ãƒ“ã‚¿ãƒŸãƒ³D", color: "#166534" }
    ],
    top3: [
      { medal: "ğŸ¥‡", name: "Mg", foods: ["ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰", "ç„ç±³"] },
      { medal: "ğŸ¥ˆ", name: "é‰„", foods: ["èµ¤èº«è‚‰", "ã»ã†ã‚Œã‚“è‰"] },
      { medal: "ğŸ¥‰", name: "ãƒ“ã‚¿ãƒŸãƒ³C", foods: ["ãƒ‘ãƒ—ãƒªã‚«", "ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼"] }
    ],
    signs: ["ç­‹è‚‰ç—›", "ã ã‚‹ã•", "å›å¾©é…å»¶"]
  },
  bone: {
    icon: "ğŸ¦´",
    name: "éª¨ï¼ˆéª¨ä»£è¬ï¼‰",
    color: "#eab308",
    desc: "éª¨å¯†åº¦ç¶­æŒã§ã¯ã‚«ãƒ«ã‚·ã‚¦ãƒ ã ã‘ã§ãªãã€ãƒ“ã‚¿ãƒŸãƒ³Dãƒ»K2ãƒ»ãƒã‚°ãƒã‚·ã‚¦ãƒ ãƒ»ãƒ›ã‚¦ç´ ãƒ»äºœé‰›ãƒ»ã‚³ãƒ©ãƒ¼ã‚²ãƒ³ã®é€£æºãŒéµã€‚ãƒ“ã‚¿ãƒŸãƒ³K2ã¯ã‚«ãƒ«ã‚·ã‚¦ãƒ ã‚’éª¨ã¸èª˜å°ã—ã€Mgã¯éª¨çµæ™¶ã®å½¢æˆã‚’åŠ©ã‘ã¾ã™ã€‚ã‚ªãƒ¼ã‚½ãƒ¢ãƒ¬ã‚­ãƒ¥ãƒ©ãƒ¼ã§ã¯å˜ä¸€æ „é¤Šç´ ã§ãªãã€Œãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ã¨ã—ã¦è©•ä¾¡ã—ã¾ã™ã€‚",
    nutrients: [
      { label: "ğŸ¦· Ca", color: "#a16207" },
      { label: "â˜€ï¸ ãƒ“ã‚¿ãƒŸãƒ³D", color: "#ca8a04" },
      { label: "ğŸ’Š ãƒ“ã‚¿ãƒŸãƒ³K2", color: "#a16207" },
      { label: "âœ¨ Mg", color: "#854d0e" },
      { label: "ğŸ”¬ ãƒ›ã‚¦ç´ ", color: "#78350f" },
      { label: "âš¡ äºœé‰›", color: "#a16207" },
      { label: "ğŸ§¬ ã‚³ãƒ©ãƒ¼ã‚²ãƒ³", color: "#ca8a04" }
    ],
    top3: [
      { medal: "ğŸ¥‡", name: "Ca", foods: ["å°é­š", "ä¹³è£½å“", "è±†è…"] },
      { medal: "ğŸ¥ˆ", name: "ãƒ“ã‚¿ãƒŸãƒ³D", foods: ["é®­", "åµé»„"] },
      { medal: "ğŸ¥‰", name: "ãƒ“ã‚¿ãƒŸãƒ³K2", foods: ["ç´è±†", "ãƒãƒ¼ã‚º"] }
    ],
    signs: ["éª¨å¯†åº¦ä½ä¸‹", "é–¢ç¯€ã®ç—›ã¿", "æ­¯ã®ãƒˆãƒ©ãƒ–ãƒ«"]
  }
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Starfield
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function initStarfield() {
  const canvas = document.getElementById("starfield");
  const ctx = canvas.getContext("2d");
  let W, H, stars;

  function resize() {
    W = canvas.width  = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }

  function createStars(n) {
    return Array.from({ length: n }, () => ({
      x: Math.random() * W,
      y: Math.random() * H,
      r: Math.random() * 1.4 + 0.3,
      speed: Math.random() * 0.18 + 0.04,
      alpha: Math.random(),
      da: (Math.random() * 0.008 + 0.003) * (Math.random() < 0.5 ? 1 : -1)
    }));
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    // deep space gradient
    const g = ctx.createRadialGradient(W / 2, 0, 0, W / 2, H / 2, Math.max(W, H));
    g.addColorStop(0, "#0d1b3e");
    g.addColorStop(0.5, "#020617");
    g.addColorStop(1, "#000");
    ctx.fillStyle = g;
    ctx.fillRect(0, 0, W, H);

    stars.forEach(s => {
      s.alpha += s.da;
      if (s.alpha >= 1 || s.alpha <= 0) s.da *= -1;
      s.y += s.speed;
      if (s.y > H) { s.y = 0; s.x = Math.random() * W; }

      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(200,220,255,${Math.max(0, Math.min(1, s.alpha))})`;
      ctx.fill();
    });

    requestAnimationFrame(draw);
  }

  resize();
  stars = createStars(220);
  draw();
  let resizeTimer;
  window.addEventListener("resize", () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => { resize(); stars = createStars(220); }, 150);
  });
}());

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Particle burst
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const SHAPES = ["â—", "â˜…", "â™¥", "â—†", "âœ¦", "â¬Ÿ"];

/** Convert a 6-digit hex color string to an approximate HSL hue (0-360). */
function hexToHue(hex) {
  const n = parseInt(hex.replace("#", ""), 16);
  const r = (n >> 16 & 0xff) / 255;
  const g = (n >>  8 & 0xff) / 255;
  const b = (n       & 0xff) / 255;
  const max = Math.max(r, g, b), min = Math.min(r, g, b);
  if (max === min) return 0;
  const d = max - min;
  let h;
  if (max === r)      h = (g - b) / d + (g < b ? 6 : 0);
  else if (max === g) h = (b - r) / d + 2;
  else                h = (r - g) / d + 4;
  return Math.round(h * 60);
}

function burst(cx, cy, color) {
  const baseHue = hexToHue(color);
  const count = 55 + Math.floor(Math.random() * 20);
  for (let i = 0; i < count; i++) {
    const el = document.createElement("span");
    el.className = "particle";
    el.textContent = SHAPES[Math.floor(Math.random() * SHAPES.length)];
    const h = Math.round(baseHue + Math.random() * 60 - 30);
    el.style.cssText = `
      left: ${cx}px; top: ${cy}px;
      font-size: ${8 + Math.random() * 14}px;
      color: hsl(${h},90%,65%);
      text-shadow: 0 0 8px hsl(${h},90%,65%);
      position: fixed;
    `;
    document.body.appendChild(el);

    const angle = Math.random() * Math.PI * 2;
    const dist  = 40 + Math.random() * 120;
    const dx = Math.cos(angle) * dist;
    const dy = Math.sin(angle) * dist;
    const dur = 600 + Math.random() * 500;

    el.animate(
      [
        { transform: "translate(-50%,-50%) scale(1) rotate(0deg)",   opacity: 1 },
        { transform: `translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px)) scale(0.1) rotate(${Math.random()*720-360}deg)`, opacity: 0 }
      ],
      { duration: dur, easing: "cubic-bezier(0.22,1,0.36,1)" }
    );

    setTimeout(() => el.remove(), dur + 50);
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Info panel render
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const placeholder = document.getElementById("placeholder");
const infoPanel   = document.getElementById("infoPanel");

function buildPanel(key) {
  const d = zones[key];
  const chipHTML = d.nutrients.map(n =>
    `<span class="chip" style="background:${n.color}">${n.label}</span>`
  ).join("");

  const top3HTML = d.top3.map(r =>
    `<div class="rank-item">
      <span class="rank-medal">${r.medal}</span>
      <span class="rank-nutrient" style="color:${d.color}">${r.name}</span>
      <div class="rank-food-tags">${r.foods.map(f => `<span class="food-tag">${f}</span>`).join("")}</div>
    </div>`
  ).join("");

  const signHTML = d.signs.map(s =>
    `<span class="sign-badge">âš  ${s}</span>`
  ).join("");

  return `
    <div class="panel-header">
      <div class="panel-icon">${d.icon}</div>
      <div class="panel-title-wrap">
        <div class="panel-zone-name" style="color:${d.color}">${d.name}</div>
      </div>
    </div>
    <p class="panel-desc">${d.desc}</p>
    <div>
      <div class="section-label">ğŸ’Š é–¢é€£æ „é¤Šç´ </div>
      <div class="chip-list">${chipHTML}</div>
    </div>
    <div>
      <div class="section-label">ğŸ† é‡è¦åº¦ Top 3</div>
      <div class="ranking-list">${top3HTML}</div>
    </div>
    <div>
      <div class="section-label">âš ï¸ æ¬ ä¹ã‚µã‚¤ãƒ³</div>
      <div class="sign-list">${signHTML}</div>
    </div>
  `;
}

function showPanel(key, clickX, clickY) {
  const d = zones[key];

  // update body panel
  infoPanel.innerHTML = buildPanel(key);

  placeholder.classList.add("hidden");

  // animate panel in
  infoPanel.classList.remove("shown");
  infoPanel.classList.add("visible");
  // Force a browser reflow so the CSS transition plays from the initial state
  void infoPanel.offsetWidth;
  infoPanel.style.borderColor = d.color + "55";
  infoPanel.style.boxShadow   = `0 24px 80px rgba(0,0,0,0.38), 0 0 40px ${d.color}22`;
  infoPanel.classList.add("shown");

  burst(clickX, clickY, d.color);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Zone click/keyboard
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let activeKey = null;

document.querySelectorAll(".zone").forEach(el => {
  function activate(event) {
    document.querySelectorAll(".zone").forEach(z => z.classList.remove("active"));
    el.classList.add("active");

    const key = el.dataset.zone;
    activeKey = key;

    let cx, cy;
    if (event.type === "keydown") {
      const rect = el.getBoundingClientRect();
      cx = rect.left + rect.width / 2;
      cy = rect.top  + rect.height / 2;
    } else {
      cx = event.clientX;
      cy = event.clientY;
    }

    showPanel(key, cx, cy);
  }

  el.addEventListener("click", activate);
  el.addEventListener("keydown", e => {
    if (e.key === "Enter" || e.key === " ") { e.preventDefault(); activate(e); }
  });
});

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   "View all" button
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const btnAll   = document.getElementById("btnAll");
const allPanel = document.getElementById("allPanel");
const allGrid  = document.getElementById("allGrid");

// Build all-grid once
allGrid.innerHTML = Object.entries(zones).map(([key, d]) => {
  const chips = d.nutrients.slice(0, 4).map(n =>
    `<span class="all-chip" style="background:${n.color}">${n.label}</span>`
  ).join("");
  return `
    <div class="all-card" data-zone="${key}" tabindex="0" role="button"
      aria-label="${d.name}ã®è©³ç´°ã‚’è¦‹ã‚‹"
      style="border-color:${d.color}44; box-shadow: 0 0 16px ${d.color}18">
      <div class="all-card-title" style="color:${d.color}">${d.icon} ${d.name.split("ï¼ˆ")[0]}</div>
      <div class="all-card-chips">${chips}</div>
    </div>
  `;
}).join("");

allGrid.querySelectorAll(".all-card").forEach(card => {
  function activateCard(event) {
    const key = card.dataset.zone;
    const el  = document.querySelector(`.zone[data-zone="${key}"]`);
    document.querySelectorAll(".zone").forEach(z => z.classList.remove("active"));
    if (el) el.classList.add("active");

    let cx, cy;
    if (event.type === "keydown") {
      const rect = card.getBoundingClientRect();
      cx = rect.left + rect.width / 2;
      cy = rect.top  + rect.height / 2;
    } else {
      cx = event.clientX;
      cy = event.clientY;
    }

    showPanel(key, cx, cy);
    // scroll body col into view on mobile
    document.getElementById("bodyCol").scrollIntoView({ behavior: "smooth", block: "nearest" });
  }
  card.addEventListener("click", activateCard);
  card.addEventListener("keydown", e => {
    if (e.key === "Enter" || e.key === " ") { e.preventDefault(); activateCard(e); }
  });
});

btnAll.addEventListener("click", () => {
  const open = allPanel.classList.toggle("open");
  btnAll.setAttribute("aria-expanded", open);
  if (open) {
    // highlight all zones
    document.querySelectorAll(".zone").forEach(z => z.classList.add("active"));
    allPanel.scrollIntoView({ behavior: "smooth", block: "nearest" });
    // burst from each zone
    document.querySelectorAll(".zone").forEach((z, i) => {
      const rect = z.getBoundingClientRect();
      const key  = z.dataset.zone;
      setTimeout(() => burst(
        rect.left + rect.width / 2,
        rect.top  + rect.height / 2,
        zones[key].color
      ), i * 120);
    });
  } else {
    document.querySelectorAll(".zone").forEach(z => {
      if (z.dataset.zone !== activeKey) z.classList.remove("active");
    });
  }
});
</script>
</body>
</html>
